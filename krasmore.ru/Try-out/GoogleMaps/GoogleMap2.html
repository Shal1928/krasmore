<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Simple Controls</title>
<link href="default.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="richmarker.js"></script>

    <script type="text/javascript">

        function div() {
            var m = document.createElement('DIV');
            m.innerHTML = '<div class="arrow"></div>';
            return m;
        }

        function initialize() {

            var polyanaLatLng = new google.maps.LatLng(55.831250, 92.251116);
        
            var options = {
                zoom: 15,
                center: polyanaLatLng,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                zoomControl: true,
                zoomControOptions: {style: google.maps.ZoomControlStyle.LARGE},
                mapTypeId: google.maps.MapTypeId.HYBRID,
                streetViewControl: false
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"), options);

            var markerContentString = '<div style="color: #FFF; font: 14 Verdana;">' +
                                            'Поляна' + 
                                        '</div>';

            //var markerSvg = new google.maps.MarkerImage('Marker.svg');
            var marker = new RichMarker({
                content: markerContentString,//document.getElementById("MarkerSvg"),
                position: new google.maps.LatLng(55.830300, 92.250116),
                map: map,
                title: "Поляна",
                shadow: false,
                anchor: RichMarkerPosition.TOP_RIGHT
            });


            var markerFlagContentString = '<div style="color: #000; font: 10 Verdana;">' +
                                            '<div style="z-index:99; top: 18px; left: 5px; float: left; position: relative;">навес</div><img src="markerFlag.png" style="z-index: 1; position: relative;"></img>' +
                                        '</div>';

            var markerFlage = new RichMarker({
                content: markerFlagContentString, //document.getElementById("MarkerSvg"),
                position: new google.maps.LatLng(55.830300, 92.250116),
                map: map,
                title: "Поляна",
                shadow: true,
                anchor: RichMarkerPosition.BOTTOM_LEFT
            });


//            google.maps.event.addListenerOnce(map, 'idle', function () {
//                $('.arrow').svg({ onLoad: 'Marker.svg' });
//            });

            var contentString = '<div id="content">' +
                '<div id="siteNotice">' +
                    '</div>' +
                        '<h2 id="firstHeading" class="firstHeading">Поляна</h2>' +
                            '<div id="bodyContent">' +
                                '<p>Находится в 12 км от Красноярской ГЭС, за Бирюсинским заливом. ' +
                                    'Если идти на Амуре, то путь занимает примерно 20 минут, а на большом катере 40. ' +
                                        'Поляна достаточно удалена от фарватера, чтобы проходящие мимо катера ' +
                                            'не мешали вам отдыхать и купаться.</p>' +
                                                '</div>' +
                                                    '</div>';

            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });

            google.maps.event.addListener(marker, 'click', function () {
                infowindow.open(map, marker);
            });


            var placesArray = {};
            placesArray['polyana'] = {
                center: new google.maps.LatLng(55.831150, 92.251516)};
        
            var cityCircle;

            for (var city in placesArray) {
                // Construct the circle for each value in citymap. We scale population by 20.
                var populationOptions = {
                    strokeColor: "#FFF", //EEB744
                    strokeOpacity: 0.4,
                    strokeWeight: 2,
                    fillColor: "#97C35F", //97C35F
                    fillOpacity: 0.2,
                    map: map,
                    center: placesArray[city].center,
                    radius: 130
                };
                cityCircle = new google.maps.Circle(populationOptions);
            }


            var weatherLayer = new google.maps.weather.WeatherLayer({
                temperatureUnits: google.maps.weather.TemperatureUnit.CELSIUS
            });
            weatherLayer.setMap(map);

            var cloudLayer = new google.maps.weather.CloudLayer();
            cloudLayer.setMap(map);
        }

//    // Create a base icon for all of our markers that specifies the
//    // shadow, icon dimensions, etc.
//    var baseIcon = new GIcon(G_DEFAULT_ICON);
//    baseIcon.shadow = "http://www.google.com/mapfiles/shadow50.png";
//    baseIcon.iconSize = new GSize(20, 34);
//    baseIcon.shadowSize = new GSize(37, 34);
//    baseIcon.iconAnchor = new GPoint(9, 34);
//    baseIcon.infoWindowAnchor = new GPoint(9, 2);

//    // Creates a marker whose info window displays the letter corresponding
//    // to the given index.
//    function createMarker(point, index) {
//        // Create a lettered icon for this point using our icon class
//        var letter = String.fromCharCode("A".charCodeAt(0) + index);
//        var letteredIcon = new GIcon(baseIcon);
//        letteredIcon.image = "http://www.google.com/mapfiles/marker" + letter + ".png";

//        // Set up our GMarkerOptions object
//        markerOptions = { icon: letteredIcon };
//        var marker = new GMarker(point, markerOptions);

//        GEvent.addListener(marker, "click", function () {
//            marker.openInfoWindowHtml("Marker <b>" + letter + "</b>");
//        });
//        return marker;
//    }

</script>
</head>
<body onload="initialize()">
    <div id="map_canvas"></div>
    
    <svg version="1.0" id="MarkerSvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="50px" height="50px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve">
<g>
	<path fill="none" stroke="#3984B4" stroke-miterlimit="10" d="M25,43.843"/>
	<g>
		<polygon fill="#FFFFFF" points="16.684,11.426 25,43.843 33.316,11.426 25,3.513 		"/>
		<path fill="#3984B4" d="M25,47.867l-9.431-36.761L25,2.133l9.431,8.974L25,47.867z M17.798,11.746L25,39.818l7.202-28.072
			L25,4.894L17.798,11.746z"/>
	</g>
	<path fill="none" stroke="#3984B4" stroke-miterlimit="10" d="M16.684,11.426L25,3.513L16.684,11.426z"/>
	<polyline fill="#3984B4" points="17.777,15.689 32.223,15.689 33.316,11.426 25,3.513 16.684,11.426 	"/>
</g>
</svg>
</body>
</html>